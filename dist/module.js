define(["@grafana/data","react","@emotion/css","@grafana/runtime","@grafana/ui"],((e,n,t,r,a)=>(()=>{"use strict";var o={802:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(559),a=t.n(r),o=t(476),l=t.n(o)()(a());l.push([e.id,":root {\n  --green: hsl(106, 50%, 55%);\n  --red: hsl(0, 67%, 50%);\n  --orange: hsl(31, 88%, 51%);\n  --blue: hsl(201, 75%, 48%);\n  --radius: ;\n}\n.app {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows: 1fr;\n  gap: 0px 0px;\n  grid-template-areas: 'left textContainer';\n}\n.left {\n  grid-area: left;\n}\n.textContainer {\n  grid-area: textContainer;\n}\n.addBtn {\n  background-color: var(--blue);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n}\n.addBtn:hover {\n  background-color: hsl(201, 75%, 61%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.deleteBtn {\n  background-color: var(--red);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n}\n.deleteBtn:hover {\n  background-color: hsl(0, 67%, 68%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.sendBtn {\n  background-color: var(--green);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n  margin-left: auto;\n  margin-right: 20px;\n}\n.sendBtn:hover {\n  background-color: hsl(106, 50%, 75%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.row-text {\n  padding-left: 8px;\n}\ninput {\n  padding: 0px 8px;\n  background: rgb(17, 18, 23);\n  line-height: 1.57143;\n  font-size: 14px;\n  color: rgb(204, 204, 220);\n  border: 1px solid rgba(204, 204, 220, 0.2);\n  position: relative;\n  z-index: 0;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  border-radius: 2px;\n  /* height: 100%;\n  width: 100%; */\n}\n.btn {\n  align-items: center;\n  font-size: 14px;\n  font-weight: 500;\n  font-family: Inter, Helvetica, Arial, sans-serif;\n  padding: 0px 15px;\n  height: 32px;\n  line-height: 30px;\n  vertical-align: middle;\n  cursor: pointer;\n  border-radius: 2px;\n\n  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,\n    border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n}\n.row {\n  margin: 0;\n}\n.inputContainer,\n.row {\n  display: flex;\n}\n.header {\n  display: flex;\n  flex-direction: row;\n}\n.alert-unlink {\n  color: var(--orange);\n}\n","",{version:3,sources:["webpack://./components/PanelJson.css"],names:[],mappings:"AAAA;EACE,2BAA2B;EAC3B,uBAAuB;EACvB,2BAA2B;EAC3B,0BAA0B;EAC1B,UAAU;AACZ;AACA;EACE,aAAa;EACb,qCAAqC;EACrC,uBAAuB;EACvB,YAAY;EACZ,yCAAyC;AAC3C;AACA;EACE,eAAe;AACjB;AACA;EACE,wBAAwB;AAC1B;AACA;EACE,6BAA6B;EAC7B,gBAAgB;;EAEhB,yBAAyB;EACzB,6BAA6B;AAC/B;AACA;EACE,oCAAoC;EACpC,yBAAyB;EACzB,2CAA2C;EAC3C,yBAAyB;AAC3B;AACA;EACE,4BAA4B;EAC5B,gBAAgB;;EAEhB,yBAAyB;EACzB,6BAA6B;AAC/B;AACA;EACE,kCAAkC;EAClC,yBAAyB;EACzB,2CAA2C;EAC3C,yBAAyB;AAC3B;AACA;EACE,8BAA8B;EAC9B,gBAAgB;;EAEhB,yBAAyB;EACzB,6BAA6B;EAC7B,iBAAiB;EACjB,kBAAkB;AACpB;AACA;EACE,oCAAoC;EACpC,yBAAyB;EACzB,2CAA2C;EAC3C,yBAAyB;AAC3B;AACA;EACE,iBAAiB;AACnB;AACA;EACE,gBAAgB;EAChB,2BAA2B;EAC3B,oBAAoB;EACpB,eAAe;EACf,yBAAyB;EACzB,0CAA0C;EAC1C,kBAAkB;EAClB,UAAU;EACV,mBAAmB;EACnB,YAAY;EACZ,kBAAkB;EAClB;gBACc;AAChB;AACA;EACE,mBAAmB;EACnB,eAAe;EACf,gBAAgB;EAChB,gDAAgD;EAChD,iBAAiB;EACjB,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;EACtB,eAAe;EACf,kBAAkB;;EAElB;qGACmG;AACrG;AACA;EACE,SAAS;AACX;AACA;;EAEE,aAAa;AACf;AACA;EACE,aAAa;EACb,mBAAmB;AACrB;AACA;EACE,oBAAoB;AACtB",sourcesContent:[":root {\n  --green: hsl(106, 50%, 55%);\n  --red: hsl(0, 67%, 50%);\n  --orange: hsl(31, 88%, 51%);\n  --blue: hsl(201, 75%, 48%);\n  --radius: ;\n}\n.app {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows: 1fr;\n  gap: 0px 0px;\n  grid-template-areas: 'left textContainer';\n}\n.left {\n  grid-area: left;\n}\n.textContainer {\n  grid-area: textContainer;\n}\n.addBtn {\n  background-color: var(--blue);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n}\n.addBtn:hover {\n  background-color: hsl(201, 75%, 61%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.deleteBtn {\n  background-color: var(--red);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n}\n.deleteBtn:hover {\n  background-color: hsl(0, 67%, 68%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.sendBtn {\n  background-color: var(--green);\n  font-weight: 500;\n\n  color: rgb(255, 255, 255);\n  border: 1px solid transparent;\n  margin-left: auto;\n  margin-right: 20px;\n}\n.sendBtn:hover {\n  background-color: hsl(106, 50%, 75%);\n  color: rgb(255, 255, 255);\n  box-shadow: rgba(1, 4, 9, 0.75) 0px 1px 2px;\n  border-color: transparent;\n}\n.row-text {\n  padding-left: 8px;\n}\ninput {\n  padding: 0px 8px;\n  background: rgb(17, 18, 23);\n  line-height: 1.57143;\n  font-size: 14px;\n  color: rgb(204, 204, 220);\n  border: 1px solid rgba(204, 204, 220, 0.2);\n  position: relative;\n  z-index: 0;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  border-radius: 2px;\n  /* height: 100%;\n  width: 100%; */\n}\n.btn {\n  align-items: center;\n  font-size: 14px;\n  font-weight: 500;\n  font-family: Inter, Helvetica, Arial, sans-serif;\n  padding: 0px 15px;\n  height: 32px;\n  line-height: 30px;\n  vertical-align: middle;\n  cursor: pointer;\n  border-radius: 2px;\n\n  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,\n    border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n}\n.row {\n  margin: 0;\n}\n.inputContainer,\n.row {\n  display: flex;\n}\n.header {\n  display: flex;\n  flex-direction: row;\n}\n.alert-unlink {\n  color: var(--orange);\n}\n"],sourceRoot:""}]);const s=l},631:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(559),a=t.n(r),o=t(476),l=t.n(o)()(a());l.push([e.id,"img {\n  width: 40px;\n  height: 40px;\n}\n","",{version:3,sources:["webpack://./components/form/TextComponent.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,YAAY;AACd",sourcesContent:["img {\n  width: 40px;\n  height: 40px;\n}\n"],sourceRoot:""}]);const s=l},476:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(r)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(l[i]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&l[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},559:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[n].concat([o]).join("\n")}return[n].join("\n")}},892:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},l=[],s=0;s<e.length;s++){var i=e[s],c=r.base?i[0]+r.base:i[0],d=o[c]||0,p="".concat(c," ").concat(d);o[c]=d+1;var A=t(p),u={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==A)n[A].references++,n[A].updater(u);else{var g=a(u,r);r.byIndex=s,n.splice(s,0,{identifier:p,updater:g,references:1})}l.push(p)}return l}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var s=t(o[l]);n[s].references--}for(var i=r(e,a),c=0;c<o.length;c++){var d=t(o[c]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=i}}},311:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},60:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},192:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},760:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},865:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},644:e=>{e.exports=t},305:n=>{n.exports=e},545:e=>{e.exports=r},388:e=>{e.exports=a},650:e=>{e.exports=n}},l={};function s(e){var n=l[e];if(void 0!==n)return n.exports;var t=l[e]={id:e,exports:{}};return o[e](t,t.exports,s),t.exports}s.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return s.d(n,{a:n}),n},s.d=(e,n)=>{for(var t in n)s.o(n,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0;var i={};return(()=>{s.r(i),s.d(i,{plugin:()=>O});var e=s(305),n=s(650),t=s.n(n),r=s(892),a=s.n(r),o=s(760),l=s.n(o),c=s(311),d=s.n(c),p=s(192),A=s.n(p),u=s(60),g=s.n(u),m=s(865),f=s.n(m),C=s(802),h={};h.styleTagTransform=f(),h.setAttributes=A(),h.insert=d().bind(null,"head"),h.domAPI=l(),h.insertStyleElement=g(),a()(C.Z,h),C.Z&&C.Z.locals&&C.Z.locals;var E=s(644),b=s(545),B=s(388);let v=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,n)=>e+((n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_")),"");const x="public/plugins/csgroup-kafkametis-panel/img/787c7dc9c2ff65c2e7d1.svg",y=({row:e,deleteRow:n,handleChangeRow:r})=>{const a=n=>{const t={id:e.id,type:n.target.name.includes("rowResult")?n.target.value:e.type,value:n.target.name.includes("rowResult")?e.value:n.target.value};r(t)};return t().createElement("div",{className:"row"},t().createElement("input",{type:"text",name:e.id+"rowResult",id:e.id+"type",value:e.type,onChange:a}),t().createElement("input",{type:"text",name:e.id+"valresult",id:e.id+"value",value:e.value,onChange:a}),t().createElement("button",{className:"btn deleteBtn",type:"button",onClick:()=>{n(e.id)},title:"delete"},t().createElement("img",{className:"icon",src:x,alt:"delete"}),"delete"))};function w(e,n,t,r,a,o,l){try{var s=e[o](l),i=s.value}catch(e){return void t(e)}s.done?n(i):Promise.resolve(i).then(r,a)}let k=-1,S=0;const N=(z=function*(e,n,t){let r=(0,b.getBackendSrv)(),a="RQ-"+(++S).toString();((e,t)=>{k>-1?t(k):r.fetch({method:"GET",url:document.location.protocol+"//"+document.location.host+"/api/datasources",headers:{"Content-Type":"application/json"}}).forEach((n=>{200===n.status&&n.data.forEach((n=>{n.type===e&&(k=n.id)}))})).then((e=>{k>-1?t(k):n(new Error("Expected datasource not found"),null)})).catch((e=>{n(new Error("Fail to call backend, "+e),null)}))})(e,(e=>{let o=null;r.fetch({method:"POST",url:document.location.protocol+"//"+document.location.host+"/api/ds/query",data:{queries:[{datasourceId:e,refId:a,query:t}]}}).forEach((e=>{null===o&&(o=e)})).then((()=>{if(200===o.status)if(void 0===o.data.results[a])n(new Error("Request has no matching response"),null);else{let e={};o.data.results[a].frames.forEach((n=>{n.schema.fields.map(((t,r)=>{e[t.name]=n.data.values[r][0]}))})),n(null,e)}else n(new Error("Fail to send data (http: "+o.status+")"),null)})).catch((e=>{n(e,null)}))}))},j=function(){var e=this,n=arguments;return new Promise((function(t,r){var a=z.apply(e,n);function o(e){w(a,t,r,o,l,"next",e)}function l(e){w(a,t,r,o,l,"throw",e)}o(void 0)}))},function(e,n,t){return j.apply(this,arguments)});var z,j,T=s(631),R={};R.styleTagTransform=f(),R.setAttributes=A(),R.insert=d().bind(null,"head"),R.domAPI=l(),R.insertStyleElement=g(),a()(T.Z,R),T.Z&&T.Z.locals&&T.Z.locals;let P=!1,Z=!1;const I=({rows:r,data:a})=>{const[o,l]=(0,n.useState)((()=>P?o:r));return(0,n.useEffect)((()=>{l(P?o:r)}),[o,r]),t().createElement(t().Fragment,null,t().createElement("div",{className:"row-text"},t().createElement("header",null,t().createElement("h3",null,"json content"," ",P?t().createElement("span",{className:"alert-unlink",title:"unlinked to form"},t().createElement("img",{className:"icon",src:"public/plugins/csgroup-kafkametis-panel/img/2846281889e00962e018.svg",alt:"unlink from list"})):t().createElement("span",{title:"link to form"},t().createElement("img",{className:"icon",src:"public/plugins/csgroup-kafkametis-panel/img/5a864f1467d80f560247.svg",alt:"link to list"})))),t().createElement("textarea",{placeholder:" ...past json",rows:10,cols:33,name:"json",id:"",value:o,role:"textarea",onChange:e=>(P=!0,void l(e.target.value))}),t().createElement("div",{className:"row"},t().createElement("button",{className:"btn deleteBtn",role:"button",name:"delete",onClick:()=>{l(""),P=!1},title:"delete"},t().createElement("img",{className:"icon",src:x,alt:"delete json"}),"delete"),t().createElement("button",{className:"btn sendBtn",role:"button",name:"fetchJson",onClick:()=>{let n=(0,b.getAppEvents)();Z&&n.publish({type:e.AppEvents.alertError.name,payload:["Request in progress, please wait"]}),Z=!0,N("csgroup-grafanadatasourcekafka-datasource",((t,r)=>{Z=!1,null==t?null!==r?0!==r.status?n.publish({type:e.AppEvents.alertSuccess.name,payload:["Sent on Kafka, ack after "+r.duration+"ms"]}):n.publish({type:e.AppEvents.alertError.name,payload:["Kafka send acknoledge timeout"]}):n.publish({type:e.AppEvents.alertError.name,payload:["Backend datasource respnse is empty"]}):n.publish({type:e.AppEvents.alertError.name,payload:[t]})}),o)}},t().createElement("img",{className:"icon",src:"public/plugins/csgroup-kafkametis-panel/img/eefef25f5cc378fdafe7.svg",alt:"send to kafka"}),"send Json"))))},O=new e.PanelPlugin((({data:e,width:r,height:a})=>{const[o,l]=(0,n.useState)(""),[s,i]=(0,n.useState)("0"),[c,d]=(0,n.useState)([]),[p,A]=(0,n.useState)([]),u=(0,B.useStyles2)((()=>({app:E.css`
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: 1fr;
        gap: 0px 0px;
        grid-template-areas: 'left textContainer';
      `,left:E.css`
        grid-area: left;
      `,textContainer:E.css`
        grid-area: textContainer;
      `,addBtn:E.css`
        background-color: green;
        font-weight: bold;
      `}))),g=e=>{const n=e.map((e=>[e.type,e.value]));return JSON.stringify(Object.fromEntries(n),void 0,2)};let m=g(c);const f=e=>{"row"===e.target.name?l(e.target.value):i(String(e.target.value))},C=e=>{d(c.map((n=>(n.id===e.id&&(n=e),n)))),m=g(c)};(0,n.useEffect)((()=>{const e=(0,b.getDataSourceSrv)();let n=[];Object.keys(e.datasources).forEach((t=>{n.push(e.datasources[t].meta.id)})),n&&A(n)}),[]),console.log("data2",p);const h=e=>{d(c.filter((n=>n.id!=e))),m=g(c)};return t().createElement("div",{className:(0,E.cx)(u.app,E.css`
          width: ${r}px;
          height: ${a}px;
        `)},t().createElement("div",{className:"left"},t().createElement("div",{className:"header"},t().createElement(B.Select,{value:p,onChange:e=>{console.log(e)}},p.map((e=>t().createElement("option",{key:e},e)))),t().createElement("div",{className:"inputContainer"},t().createElement("input",{type:"text",placeholder:"add key",name:"row",value:o,onChange:f}),t().createElement("input",{type:"text",placeholder:"add value",name:"val",value:s,onChange:f})),t().createElement("button",{onClick:()=>{const e={id:v(),type:o,value:s};d([...c,e]),l(""),i(""),m=g(c)},className:"btn addBtn",title:"add item"},t().createElement("img",{className:"icon",src:"public/plugins/csgroup-kafkametis-panel/img/f3d27c7e16f84905de54.svg",alt:"add"}),"add")),t().createElement("div",{className:"rowList"},c.map((e=>t().createElement(y,{key:e.id,row:e,deleteRow:h,handleChangeRow:C})))),c.length>1?t().createElement("button",{className:"btn deleteBtn center",onClick:()=>{d([]),m=g(c)},title:" delete all"},t().createElement("img",{className:"icon",src:x,alt:"delete"}),"delete all"):""),t().createElement("div",{className:"textContainer"},t().createElement(I,{rows:m,data:e})))})).setPanelOptions((e=>e.addTextInput({path:"text",name:"Json panel",description:"Description of panel option",defaultValue:"Default value of text input option"})))})(),i})()));
//# sourceMappingURL=module.js.map